# Implementation Plan: Project Audit & Modernization

**Track ID:** project-audit-modernization_20260205
**Spec:** [spec.md](./spec.md)
**Created:** 2026-02-05
**Status:** [ ] Planning

## Overview

This track focuses on understanding and improving the long-term maintainability of MaverickMCP. Work is primarily research + documentation: a repo audit, a review of the current MCP/FastMCP ecosystem, and a prioritized modernization/refactor plan. No behavior changes are expected unless explicitly called out as optional "quick wins."

## Start Here Next Session (Safe Wins First)

These are the first steps to execute when you begin implementation work:

1. **Pick the golden path** (single supported server entrypoint + transport for Claude Desktop).
2. **Remove/relocate global side effects** (centralize `logging.basicConfig()` and `load_dotenv()` into a single bootstrap path).
3. **Re-evaluate FastMCP transport behavior** after upgrading within stable 2.x to see if the SSE trailing-slash monkey-patch can be removed.
4. **Deprecate alternate router variants** by choosing canonical routers and adding a migration/deprecation note.
5. **Adopt background tasks** for long-running tools (deep research/backtests) where it improves responsiveness and reduces timeouts.

## Phase 1: Repo Audit (Local)

### Tasks

- [ ] Task 1.1: Confirm the “golden path” decision (transport + entrypoint)
- [ ] Task 1.2: Identify and document what becomes “legacy”
- [ ] Task 1.3: Produce a refactor sequencing plan (P0/P1/P2)

## Phase 2: MCP/FastMCP Research (External)

### Tasks

- [ ] Task 2.1: Validate MCP transport guidance (spec/changelog) for this use case
- [ ] Task 2.2: Validate FastMCP capabilities to leverage (background tasks, sampling)

## Phase 3: Modernization Roadmap

### Tasks

- [ ] Task 3.1: Define “safe wins” to do first (no behavior changes)
- [ ] Task 3.2: Define an implementation track plan (TDD tasks + verification)
- [ ] Task 3.3: Create an explicit deprecation plan for alternate paths

### Verification

- [ ] Deliverables completed (audit + research + roadmap)
- [ ] LLM Judge: N/A (no harness configured)

## Phase 4: Screener & Frontend Expansion

### Tasks

- [ ] Task 4.1: Wire up `get_movers`, `get_quotes`, `get_instruments` in schwab client wrapper + add `/api/schwab/movers`, `/api/schwab/quotes`, `/api/schwab/fundamentals` endpoints
- [ ] Task 4.2: Build `POST /api/screener/scan` orchestrator endpoint (`api/endpoints/screener.py`) — resolve universe, run Saty indicators in batch, grade with Green Flag, return ranked results
- [ ] Task 4.3: Add shadcn components to frontend (`data-table`, `command` for ticker search, `sonner` for toasts)
- [ ] Task 4.4: Build `/screener` frontend page — filters panel, results data-table, row click → `/analyze/[ticker]`, save-to-watchlist and create-idea actions
- [ ] Task 4.5: Build missing pages — `/alerts` (manage alerts linked to ideas), `/watchlists` (CRUD + batch calculate)

### Verification

- [ ] Schwab wrapper methods match `schwab-py` v1.5.1 client API (`get_movers`, `get_quotes`, `get_instruments`)
- [ ] Screener endpoint returns correct grade ordering (A+ > A > B, then by score)
- [ ] Frontend `/screener` page loads, filters work, row navigation works
- [ ] Existing Saty tests still pass (`venv/bin/pytest tests/satyland/ -v`)

---

_Generated by Conductor. Tasks will be marked [~] in progress and [x] complete._
